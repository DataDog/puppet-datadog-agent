init_config:

instances:
<%- (Array(@_instances)).each do |instance| -%>
  - name: <%= instance['name'] %>
    url: <%= instance['url'] %>
<% if instance['timeout'] -%>
    timeout: <%= instance['timeout'] %>
<% end -%>
<% if instance['username'] -%>
    username: <%= instance['username'] %>
<% end -%>
<% if instance['password'] -%>
    password: <%= instance['password'] %>
<% end -%>
<% if instance['threshold'] -%>
    threshold: <%= instance['threshold'] %>
<% end -%>
<% if instance['window'] -%>
    window: <%= instance['window'] %>
<% end -%>
<% if instance['include_content'] -%>
    include_content: <%= instance['include_content'] %>
<% end -%>
<% if instance['collect_response_time'] -%>
    collect_response_time: <%= instance['collect_response_time'] %>
<% end -%>
    disable_ssl_validation: <%= instance['disable_ssl_validation'] %>
<% if instance['headers'] and ! instance['headers'].empty? -%>
    headers:
  <%- Array(instance['headers']).each do |header| -%>
    <%- if header != '' -%>
      <%= header %>
    <%- end -%>
  <%- end -%>
<% end -%>
<% if instance['tags'] and ! instance['tags'].empty? -%>
    tags:
  <%- Array(instance['tags']).each do |tag| -%>
    <%- if tag != '' -%>
      - <%= tag %>
    <%- end -%>
  <%- end -%>
<% end -%>
<% if instance['contacts'] and ! instance['contacts'].empty? -%>
    notify:
  <%- Array(instance['contacts']).each do |contact| -%>
    <%- if contact != '' -%>
      - <%= contact %>
    <%- end -%>
  <%- end -%>
<% end -%>
<% end -%>

init_config:

instances:
<%- (Array(@_instances)).each do |instance| -%>
  - name: <%= instance['sitename'] %>
    url: <%= instance['url'] %>
<% if instance['timeout'] -%>
    timeout: <%= instance['timeout'] %>
<% end -%>
<% if instance['username'] -%>
    username: <%= instance['username'] %>
<% end -%>
<% if instance['password'] -%>
    password: <%= instance['password'] %>
<% end -%>
<% if instance['threshold'] -%>
    threshold: <%= instance['threshold'] %>
<% end -%>
<% if instance['window'] -%>
    window: <%= instance['window'] %>
<% end -%>
<% if instance['content_match'] -%>
    content_match: <%= instance['content_match'] %>
<% end -%>
<% if instance['include_content'] -%>
    include_content: <%= instance['include_content'] %>
<% end -%>
<% if instance['http_response_status_code'] -%>
    http_response_status_code: <%= instance['http_response_status_code'] %>
<% end -%>
<% if instance['collect_response_time'] -%>
    collect_response_time: <%= instance['collect_response_time'] %>
<% end -%>
<% if instance['disable_ssl_validation'] -%>
    disable_ssl_validation: <%= instance['disable_ssl_validation'] %>
<% end -%>
<% if instance['skip_event'] -%>
    skip_event: <%= instance['skip_event'] %>
<% end -%>
<% if instance['no_proxy'] -%>
    no_proxy: <%= instance['no_proxy'] %>
<% end -%>
<% if instance['check_certificate_expiration'] -%>
    check_certificate_expiration: <%= instance['check_certificate_expiration'] %>
<% if instance['check_certificate_expiration'] == true -%>
<% if instance['days_warning'] -%>
    days_warning: <%= instance['days_warning'] %>
<% end -%>
<% if instance['days_critical'] -%>
    days_critical: <%= instance['days_critical'] %>
<% end -%>
<% end -%>
<% end -%>
<% if instance['headers'] and ! instance['headers'].empty? -%>
    headers:
  <%- Array(instance['headers']).each do |header| -%>
    <%- if header != '' -%>
      <%= header %>
    <%- end -%>
  <%- end -%>
<% end -%>
<% if instance['allow_redirects'] -%>
    allow_redirects: <%= instance['allow_redirects'] %>
<% end -%>
<% if instance['tags'] and ! instance['tags'].empty? -%>
    tags:
  <%- Array(instance['tags']).each do |tag| -%>
    <%- if tag != '' -%>
      - <%= tag %>
    <%- end -%>
  <%- end -%>
<% end -%>
<% if instance['contacts'] and ! instance['contacts'].empty? -%>
    notify:
  <%- Array(instance['contacts']).each do |contact| -%>
    <%- if contact != '' -%>
      - <%= contact %>
    <%- end -%>
  <%- end -%>
<% end -%>
<% end -%>
